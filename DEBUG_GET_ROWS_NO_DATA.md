# ğŸ” è¯Šæ–­ï¼šGet row(s) èŠ‚ç‚¹æ²¡æœ‰è¿”å›æ•°æ®

## é—®é¢˜ç°è±¡

`Get row(s)` èŠ‚ç‚¹æ‰§è¡Œåæ²¡æœ‰ä»»ä½•è¿”å›æ•°æ®ã€‚

---

## ğŸ¯ å¯èƒ½çš„åŸå› 

### åŸå›  1: taskId æ²¡æœ‰æ­£ç¡®ä¼ é€’ â­â­â­â­â­

Extract Task ID èŠ‚ç‚¹çš„è¾“å‡ºæ ¼å¼ä¸æ­£ç¡®ï¼Œå¯¼è‡´ Get row(s) è¯»ä¸åˆ° taskIdã€‚

### åŸå›  2: æ•°æ®åº“ä¸­ç¡®å®æ²¡æœ‰è¿™ä¸ªä»»åŠ¡ â­â­â­â­

æµ‹è¯•çš„ taskId åœ¨ `rednote_subject_tasks` è¡¨ä¸­ä¸å­˜åœ¨ã€‚

### åŸå›  3: Get row(s) æŸ¥è¯¢æ¡ä»¶é…ç½®é”™è¯¯ â­â­â­

è¿‡æ»¤æ¡ä»¶çš„å­—æ®µåæˆ–è¡¨è¾¾å¼å†™é”™äº†ã€‚

### åŸå›  4: æ•°æ®åº“è¡¨é…ç½®é”™è¯¯ â­â­

é€‰æ‹©çš„è¡¨ä¸å¯¹æˆ–è¡¨ ID é”™è¯¯ã€‚

---

## ğŸ”§ è¯Šæ–­æ­¥éª¤

### æ­¥éª¤ 1: æ£€æŸ¥ Extract Task ID èŠ‚ç‚¹è¾“å‡º

#### 1.1 æ‰“å¼€ Extract Task ID èŠ‚ç‚¹

åœ¨ n8n ä¸­ï¼Œç‚¹å‡» **"Extract Task ID"** èŠ‚ç‚¹ï¼ŒæŸ¥çœ‹æ‰§è¡Œç»“æœã€‚

#### 1.2 æ£€æŸ¥è¾“å‡ºæ ¼å¼

**æ­£ç¡®çš„è¾“å‡ºåº”è¯¥æ˜¯**ï¼š

```json
[
  {
    "json": {
      "taskId": "task_1761794252181_chn5t4mwa"
    }
  }
]
```

**å¦‚æœæ˜¯è¿™æ ·å°±é”™äº†**ï¼š

```json
{
  "taskId": "task_1761794252181_chn5t4mwa"
}
```

#### 1.3 ä¿®å¤æ–¹æ³•

å¦‚æœè¾“å‡ºæ ¼å¼ä¸å¯¹ï¼ŒæŒ‰ç…§å‰é¢çš„ä¿®æ”¹æ–¹æ³•ï¼Œç¡®ä¿ return è¯­å¥æ˜¯ï¼š

```javascript
return [
  {
    json: {
      taskId: taskId.trim(),
    },
  },
];
```

---

### æ­¥éª¤ 2: æ£€æŸ¥ Get row(s) èŠ‚ç‚¹é…ç½®

#### 2.1 æ‰“å¼€ Get row(s) èŠ‚ç‚¹

åŒå‡» **"Get row(s)"** èŠ‚ç‚¹

#### 2.2 æ£€æŸ¥é…ç½®é¡¹

**å¿…é¡»çš„é…ç½®**ï¼š

| é…ç½®é¡¹                      | æ­£ç¡®å€¼                  | è¯´æ˜                           |
| --------------------------- | ----------------------- | ------------------------------ |
| **Operation**               | `Get`                   | è·å–è¡Œæ“ä½œ                     |
| **Data Table**              | `rednote_subject_tasks` | è¡¨å                           |
| **Filters** â†’ **Key Name**  | `taskId`                | è¦åŒ¹é…çš„å­—æ®µåï¼ˆæ³¨æ„å¤§å°å†™ï¼ï¼‰ |
| **Filters** â†’ **Key Value** | `={{ $json.taskId }}`   | ä»ä¸Šä¸€ä¸ªèŠ‚ç‚¹è·å– taskId        |

#### 2.3 å¸¸è§é”™è¯¯

âŒ **é”™è¯¯ 1**ï¼šKey Value å†™æˆäº† `taskId`ï¼ˆæ²¡æœ‰ `={{ $json.taskId }}`ï¼‰
âœ… **æ­£ç¡®**ï¼šKey Value å¿…é¡»æ˜¯ `={{ $json.taskId }}`

âŒ **é”™è¯¯ 2**ï¼šå­—æ®µåå¤§å°å†™é”™è¯¯ï¼ˆ`taskid` vs `taskId`ï¼‰
âœ… **æ­£ç¡®**ï¼šå¿…é¡»ä¸æ•°æ®åº“å­—æ®µåå®Œå…¨ä¸€è‡´ï¼ˆåŒ…æ‹¬å¤§å°å†™ï¼‰

âŒ **é”™è¯¯ 3**ï¼šé€‰æ‹©äº†é”™è¯¯çš„è¡¨
âœ… **æ­£ç¡®**ï¼šç¡®è®¤è¡¨åæ˜¯ `rednote_subject_tasks`

---

### æ­¥éª¤ 3: æ£€æŸ¥æ•°æ®åº“ä¸­æ˜¯å¦æœ‰æ•°æ®

#### 3.1 æŸ¥çœ‹æ•°æ®åº“è¡¨å†…å®¹

åœ¨ n8n ä¸­åˆ›å»ºä¸€ä¸ªä¸´æ—¶æµ‹è¯•å·¥ä½œæµï¼š

1. æ·»åŠ ä¸€ä¸ª **Manual Trigger** èŠ‚ç‚¹
2. æ·»åŠ ä¸€ä¸ª **Data Table** èŠ‚ç‚¹
3. é…ç½®ï¼š
   - **Operation**: `Get All`
   - **Data Table**: `rednote_subject_tasks`
   - **Limit**: `10`
4. æ‰§è¡Œå·¥ä½œæµï¼ŒæŸ¥çœ‹è¿”å›ç»“æœ

#### 3.2 æ£€æŸ¥è¿”å›æ•°æ®

**å¦‚æœè¿”å›ç©ºæ•°ç»„ `[]`**ï¼š

- æ•°æ®åº“è¡¨æ˜¯ç©ºçš„
- éœ€è¦å…ˆæäº¤ä¸€ä¸ªä»»åŠ¡ï¼ˆæ‰§è¡Œ workflow1ï¼‰

**å¦‚æœæœ‰æ•°æ®**ï¼š

- è®°å½•ä¸‹ taskId çš„å€¼
- ç¡®è®¤å­—æ®µåæ˜¯ `taskId` è¿˜æ˜¯ `task_id`

---

### æ­¥éª¤ 4: ä½¿ç”¨å·²çŸ¥çš„ taskId æµ‹è¯•

#### 4.1 ä»æ•°æ®åº“ä¸­æ‰¾ä¸€ä¸ªçœŸå®çš„ taskId

å¦‚æœæ­¥éª¤ 3 ä¸­çœ‹åˆ°äº†æ•°æ®ï¼Œå¤åˆ¶ä¸€ä¸ª taskIdï¼Œä¾‹å¦‚ï¼š

```
task_1761794252181_chn5t4mwa
```

#### 4.2 ç›´æ¥åœ¨ Get row(s) èŠ‚ç‚¹æµ‹è¯•

ä¸´æ—¶ä¿®æ”¹ Get row(s) èŠ‚ç‚¹çš„è¿‡æ»¤æ¡ä»¶ï¼š

- **Key Value**: ä» `={{ $json.taskId }}` æ”¹ä¸º `task_1761794252181_chn5t4mwa`ï¼ˆç¡¬ç¼–ç ï¼‰

ç‚¹å‡» **"Execute Node"**ï¼Œçœ‹æ˜¯å¦èƒ½è¿”å›æ•°æ®ã€‚

**å¦‚æœèƒ½è¿”å›æ•°æ®**ï¼š

- è¯´æ˜æŸ¥è¯¢é…ç½®æ˜¯å¯¹çš„
- é—®é¢˜å‡ºåœ¨ Extract Task ID èŠ‚ç‚¹çš„è¾“å‡º

**å¦‚æœè¿˜æ˜¯æ²¡æœ‰æ•°æ®**ï¼š

- æ£€æŸ¥å­—æ®µåæ˜¯å¦æ­£ç¡®ï¼ˆ`taskId` çš„å¤§å°å†™ï¼‰
- æ£€æŸ¥è¡¨åæ˜¯å¦æ­£ç¡®

---

## ğŸ› ï¸ å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: Extract Task ID èŠ‚ç‚¹è¾“å‡ºæ ¼å¼ä¸å¯¹

**ç—‡çŠ¶**ï¼šGet row(s) èŠ‚ç‚¹æç¤º `$json.taskId` ä¸ºç©º

**è§£å†³æ–¹æ¡ˆ**ï¼š

ä¿®æ”¹ Extract Task ID èŠ‚ç‚¹ï¼Œç¡®ä¿è¿”å›æ ¼å¼æ­£ç¡®ï¼š

```javascript
// ä» URL è·¯å¾„å‚æ•°ä¸­æå– taskId
const inputJson = $input.first().json;
console.log('ğŸ“¥ Full input:', JSON.stringify(inputJson, null, 2));

const params = inputJson.params || {};
const taskId = params.taskId || '';

console.log('ğŸ”‘ Extracted taskId:', taskId);

if (!taskId || taskId.trim() === '') {
  throw new Error('Missing taskId in URL path');
}

// å…³é”®ï¼šå¿…é¡»è¿”å›æ•°ç»„æ ¼å¼
return [
  {
    json: {
      taskId: taskId.trim(),
    },
  },
];
```

---

### é—®é¢˜ 2: æ•°æ®åº“å­—æ®µåå¤§å°å†™ä¸åŒ¹é…

**ç—‡çŠ¶**ï¼šæŸ¥è¯¢æ¡ä»¶æ˜æ˜æ˜¯å¯¹çš„ï¼Œä½†å°±æ˜¯æŸ¥ä¸åˆ°æ•°æ®

**è¯Šæ–­æ–¹æ³•**ï¼š

1. åœ¨ Get row(s) èŠ‚ç‚¹ä¸­ï¼Œä¸´æ—¶åˆ é™¤æ‰€æœ‰è¿‡æ»¤æ¡ä»¶
2. ç‚¹å‡» **"Execute Node"**ï¼Œè·å–æ‰€æœ‰æ•°æ®
3. æŸ¥çœ‹è¿”å›æ•°æ®çš„å­—æ®µåï¼Œç¡®è®¤æ˜¯ `taskId` è¿˜æ˜¯ `task_id`

**è§£å†³æ–¹æ¡ˆ**ï¼š

å¦‚æœå­—æ®µåæ˜¯ `task_id`ï¼ˆå¸¦ä¸‹åˆ’çº¿ï¼‰ï¼Œä¿®æ”¹è¿‡æ»¤æ¡ä»¶ï¼š

- **Key Name**: ä» `taskId` æ”¹ä¸º `task_id`

---

### é—®é¢˜ 3: æ•°æ®åº“è¡¨æ˜¯ç©ºçš„

**ç—‡çŠ¶**ï¼šGet All æ“ä½œè¿”å›ç©ºæ•°ç»„ `[]`

**åŸå› **ï¼š

- Workflow 1 è¿˜æ²¡æœ‰æäº¤ä»»ä½•ä»»åŠ¡
- Workflow 2 è¿˜æ²¡æœ‰å†™å…¥ä»»ä½•ç»“æœ

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. å…ˆæ‰§è¡Œ Workflow 1ï¼ˆæäº¤ä»»åŠ¡å·¥ä½œæµï¼‰ï¼Œæäº¤ä¸€ä¸ªæµ‹è¯•ä»»åŠ¡
2. ç­‰å¾… Workflow 2ï¼ˆå¤„ç†ä»»åŠ¡å·¥ä½œæµï¼‰å®Œæˆ
3. ç„¶åå†æµ‹è¯• Workflow 3ï¼ˆæŸ¥è¯¢çŠ¶æ€å·¥ä½œæµï¼‰

---

### é—®é¢˜ 4: è¡¨è¾¾å¼è¯­æ³•é”™è¯¯

**ç—‡çŠ¶**ï¼šGet row(s) èŠ‚ç‚¹æŠ¥é”™æˆ–è¿”å›ç©º

**æ£€æŸ¥ç‚¹**ï¼š

ç¡®è®¤ Get row(s) èŠ‚ç‚¹çš„ **Key Value** æ˜¯ï¼š

```
={{ $json.taskId }}
```

**å¸¸è§é”™è¯¯**ï¼š

- `$json.taskId`ï¼ˆç¼ºå°‘ `={{ }}`ï¼‰
- `{{ $json.taskId }}`ï¼ˆç¼ºå°‘å¼€å¤´çš„ `=`ï¼‰
- `={{ json.taskId }}`ï¼ˆç¼ºå°‘ `$`ï¼‰

---

## ğŸ§ª å®Œæ•´çš„è°ƒè¯•å·¥ä½œæµ

åˆ›å»ºä¸€ä¸ªä¸´æ—¶æµ‹è¯•å·¥ä½œæµæ¥è¯Šæ–­é—®é¢˜ï¼š

### æµ‹è¯•å·¥ä½œæµç»“æ„

```
Manual Trigger
    â†“
Code (ç”Ÿæˆæµ‹è¯• taskId)
    â†“
Data Table - Get (ä½¿ç”¨ç”Ÿæˆçš„ taskId æŸ¥è¯¢)
    â†“
æŸ¥çœ‹è¾“å‡ºç»“æœ
```

### Code èŠ‚ç‚¹ä»£ç ï¼ˆç”Ÿæˆæµ‹è¯•æ•°æ®ï¼‰

```javascript
// ç”Ÿæˆä¸€ä¸ªæµ‹è¯• taskId
return [
  {
    json: {
      taskId: 'task_1761794252181_chn5t4mwa', // æ›¿æ¢ä¸ºä½ æ•°æ®åº“ä¸­å®é™…å­˜åœ¨çš„ taskId
    },
  },
];
```

### Data Table èŠ‚ç‚¹é…ç½®

- **Operation**: `Get`
- **Data Table**: `rednote_subject_tasks`
- **Filters**:
  - **Key Name**: `taskId`
  - **Key Value**: `={{ $json.taskId }}`

### æ‰§è¡Œæµ‹è¯•

1. ç‚¹å‡» **"Execute Workflow"**
2. æŸ¥çœ‹ Data Table èŠ‚ç‚¹çš„è¾“å‡º
3. å¦‚æœæœ‰æ•°æ® â†’ è¯´æ˜æŸ¥è¯¢é…ç½®æ˜¯å¯¹çš„
4. å¦‚æœæ²¡æœ‰æ•°æ® â†’ æ£€æŸ¥ taskId æ˜¯å¦å­˜åœ¨ï¼Œæˆ–å­—æ®µåæ˜¯å¦æ­£ç¡®

---

## ğŸ” ä½¿ç”¨ n8n æ—¥å¿—è°ƒè¯•

### åœ¨ Extract Task ID èŠ‚ç‚¹ä¸­æ·»åŠ æ—¥å¿—

```javascript
const inputJson = $input.first().json;
console.log('ğŸ“¥ Full input:', JSON.stringify(inputJson, null, 2));

const params = inputJson.params || {};
const taskId = params.taskId || '';

console.log('ğŸ”‘ Extracted taskId:', taskId);
console.log('ğŸ”‘ TaskId type:', typeof taskId);
console.log('ğŸ”‘ TaskId length:', taskId.length);

if (!taskId || taskId.trim() === '') {
  console.error('âŒ TaskId is empty!');
  throw new Error('Missing taskId in URL path');
}

console.log('âœ… Returning taskId:', taskId.trim());

return [
  {
    json: {
      taskId: taskId.trim(),
    },
  },
];
```

### æŸ¥çœ‹æ—¥å¿—

1. æ‰§è¡Œå·¥ä½œæµåï¼Œç‚¹å‡» **"Executions"** æ ‡ç­¾
2. é€‰æ‹©æœ€è¿‘çš„ä¸€æ¬¡æ‰§è¡Œ
3. ç‚¹å‡» **"Extract Task ID"** èŠ‚ç‚¹
4. æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼ˆConsole Outputï¼‰

---

## âœ… è§£å†³æ­¥éª¤æ€»ç»“

### æ­¥éª¤ 1: ç¡®è®¤ Extract Task ID è¾“å‡ºæ­£ç¡®

```javascript
return [
  {
    json: {
      taskId: taskId.trim(),
    },
  },
];
```

### æ­¥éª¤ 2: ç¡®è®¤ Get row(s) é…ç½®æ­£ç¡®

- **Key Name**: `taskId`ï¼ˆæˆ– `task_id`ï¼Œå–å†³äºæ•°æ®åº“ï¼‰
- **Key Value**: `={{ $json.taskId }}`

### æ­¥éª¤ 3: ç¡®è®¤æ•°æ®åº“ä¸­æœ‰æ•°æ®

- æ‰§è¡Œ Workflow 1 æäº¤ä¸€ä¸ªæµ‹è¯•ä»»åŠ¡
- åœ¨ n8n Table Database ä¸­æŸ¥çœ‹æ•°æ®

### æ­¥éª¤ 4: ä½¿ç”¨ç¡¬ç¼–ç  taskId æµ‹è¯•

- ä¸´æ—¶ç”¨çœŸå®çš„ taskId æ›¿æ¢è¡¨è¾¾å¼
- ç¡®è®¤æŸ¥è¯¢åŠŸèƒ½æ­£å¸¸

### æ­¥éª¤ 5: æ£€æŸ¥å­—æ®µåå¤§å°å†™

- ç¡®è®¤æ˜¯ `taskId` è¿˜æ˜¯ `task_id`
- ä¿®æ”¹æŸ¥è¯¢æ¡ä»¶åŒ¹é…å®é™…å­—æ®µå

---

## ğŸ“ éœ€è¦ç«‹å³æ£€æŸ¥çš„äº‹é¡¹

è¯·åœ¨ n8n ä¸­ä¾æ¬¡æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼Œå¹¶å‘Šè¯‰æˆ‘ç»“æœï¼š

### âœ… æ£€æŸ¥æ¸…å•

1. **Extract Task ID èŠ‚ç‚¹æ‰§è¡Œåçš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ**
   - æœ‰æ²¡æœ‰çœ‹åˆ° `taskId` å­—æ®µï¼Ÿ
   - å€¼æ˜¯ä»€ä¹ˆï¼Ÿ

2. **Get row(s) èŠ‚ç‚¹çš„é…ç½®æˆªå›¾**
   - Filters éƒ¨åˆ†çš„ Key Name å’Œ Key Value åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

3. **æ•°æ®åº“ä¸­æœ‰æ²¡æœ‰æ•°æ®ï¼Ÿ**
   - åˆ›å»ºä¸€ä¸ªä¸´æ—¶å·¥ä½œæµï¼Œæ‰§è¡Œ Get All æ“ä½œ
   - è¿”å›äº†å¤šå°‘æ¡æ•°æ®ï¼Ÿ

4. **æµ‹è¯• URL æ˜¯ä»€ä¹ˆï¼Ÿ**
   - ä½ è®¿é—®çš„å®Œæ•´ URLï¼ˆåŒ…å« taskIdï¼‰

---

**è¯·æŒ‰ç…§ä¸Šè¿°æ­¥éª¤é€ä¸€æ£€æŸ¥ï¼Œå¹¶å‘Šè¯‰æˆ‘æ¯ä¸€æ­¥çš„ç»“æœï¼Œæˆ‘ä¼šå¸®æ‚¨ç²¾å‡†å®šä½é—®é¢˜ï¼** ğŸ¯
