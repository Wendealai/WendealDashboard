<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Inspection Guide</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }
        h1 { color: #2c3e50; border-bottom: 2px solid #666; padding-bottom: 10px; }
        h2 { color: #34495e; margin-top: 30px; }
        .step { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .step-number { font-weight: bold; color: #666; }
        .code { background-color: #f4f4f4; padding: 10px; border-radius: 3px; font-family: monospace; margin: 10px 0; }
        .warning { background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; margin: 20px 0; }
        .success { background-color: #d4edda; border: 1px solid #c3e6cb; padding: 15px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>Data Inspection Guide</h1>

    <div class="warning">
        <strong>🔍 Purpose:</strong> This guide helps you check if your R&D reports are still stored in the browser after login/logout.
    </div>

    <h2>How to Check Your Data</h2>

    <div class="step">
        <div class="step-number">Step 1: Access Data Inspector</div>
        <p>Navigate to the R&D Report Management page and look for the "Show Data Inspector" button in the top-right statistics area.</p>
        <div class="code">Click: "Show Data Inspector" button</div>
    </div>

    <div class="step">
        <div class="step-number">Step 2: Inspect Storage</div>
        <p>Click the "Inspect Storage" button to check your data status.</p>
        <div class="code">Click: "Inspect Storage" button</div>
        <p>This will:</p>
        <ul>
            <li>Check if IndexedDB is initialized</li>
            <li>Count reports in IndexedDB</li>
            <li>Count categories in IndexedDB</li>
            <li>Count files in localStorage</li>
            <li>Display detailed console logs</li>
        </ul>
    </div>

    <div class="step">
        <div class="step-number">Step 3: Check Browser Console</div>
        <p>Open browser developer tools (F12) and check the Console tab for detailed information.</p>
        <div class="code">Press F12 → Console tab</div>
        <p>Look for messages like:</p>
        <div class="code">
📦 localStorage files: 3<br>
💾 IndexedDB reports: 3<br>
📂 IndexedDB categories: 5<br>
📋 Reports details:<br>
  - Report Name (report_id) - Category: category_name
        </div>
    </div>

    <div class="step">
        <div class="step-number">Step 4: Interpret Results</div>
        <p>Check these scenarios:</p>

        <h3>✅ Data is Present:</h3>
        <div class="success">
            <strong>Console shows:</strong><br>
            📋 Reports in IndexedDB: 5<br>
            📦 Files in localStorage: 5<br>
            ✅ Data check complete: 5 reports, 3 categories, 5 files
        </div>

        <h3>❌ Data is Missing:</h3>
        <div class="warning">
            <strong>Possible scenarios:</strong><br>
            • Reports: 0, Files: 5 → Metadata lost, files exist<br>
            • Reports: 5, Files: 0 → Files lost, metadata exists<br>
            • Reports: 0, Files: 0 → All data lost<br>
            • Database error messages
        </div>
    </div>

    <div class="step">
        <div class="step-number">Step 5: Troubleshooting</div>
        <p>If data is missing, try these steps:</p>

        <h3>Reload Data:</h3>
        <div class="code">Click: "Reload Data" button</div>

        <h3>Clear Browser Cache:</h3>
        <div class="code">Browser Settings → Clear browsing data → Cached images and files</div>

        <h3>Check Incognito Mode:</h3>
        <div class="code">Open page in incognito/private mode to test data persistence</div>
    </div>

    <h2>Common Issues & Solutions</h2>

    <div class="warning">
        <strong>Issue 1:</strong> "Database not initialized"<br>
        <strong>Solution:</strong> Wait for page to fully load, then try again
    </div>

    <div class="warning">
        <strong>Issue 2:</strong> "Service not initialized"<br>
        <strong>Solution:</strong> Refresh the page and wait for initialization
    </div>

    <div class="warning">
        <strong>Issue 3:</strong> Reports show but files are missing<br>
        <strong>Solution:</strong> Data inconsistency - may need to re-upload files
    </div>

    <div class="success">
        <strong>🎯 Expected Result:</strong> After following this guide, you should know exactly where your data is and whether it's properly stored.
    </div>
</body>
</html>
