{
  "id": "snapshot_1758935721732_0jzyiohyw",
  "approvalId": "approval_1758935721694_mjwfsyu2v",
  "approvalTitle": "图像生成工作流需求文档审批",
  "version": 1,
  "timestamp": "2025-09-27T01:15:21.732Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# 图像生成工作流需求文档\r\n\r\n## 引言\r\n\r\n为 Social Media 页面开发一个全新的图像生成工作流功能，提供基于 AI 的图像生成和编辑能力。该功能将通过与 n8n 后台的 webhook 集成，实现文本到图像的生成以及图像的智能编辑功能。\r\n\r\n## 与产品愿景的一致性\r\n\r\n该功能扩展了 Social Media 页面的内容创作能力，为用户提供 AI 驱动的图像生成工具，支持社交媒体内容的快速制作和优化，提升用户的内容创作效率和质量。\r\n\r\n## 需求\r\n\r\n### 需求 1: 工作流卡片集成\r\n\r\n**用户故事：** 作为社交媒体内容创作者，我希望在 Social Media 页面看到图像生成工作流卡片，以便快速访问图像生成功能。\r\n\r\n#### 验收标准\r\n\r\n1. WHEN 用户访问 Social Media 页面 THEN 系统 SHALL 在 WorkflowSidebar 中显示图像生成工作流卡片\r\n2. IF 用户点击图像生成工作流卡片 THEN 系统 SHALL 切换到图像生成面板并显示相关功能\r\n3. WHEN 工作流卡片被选中 THEN 系统 SHALL 高亮显示该卡片并更新页面标题\r\n\r\n### 需求 2: 文生图功能\r\n\r\n**用户故事：** 作为内容创作者，我希望能够输入文本描述来生成图像，以便快速创建符合需求的视觉内容。\r\n\r\n#### 验收标准\r\n\r\n1. WHEN 用户选择文生图模式 THEN 系统 SHALL 显示文本输入框和生成按钮\r\n2. IF 用户输入有效的文本描述并点击生成 THEN 系统 SHALL 通过 webhook 调用 n8n 后台进行图像生成\r\n3. WHEN n8n 返回生成的图像 THEN 系统 SHALL 在面板中显示生成的图像\r\n4. IF 图像生成过程中发生错误 THEN 系统 SHALL 显示友好的错误提示\r\n\r\n### 需求 3: 图片编辑功能\r\n\r\n**用户故事：** 作为内容创作者，我希望能够上传现有图片并输入修改指令，以便对图片进行智能编辑。\r\n\r\n#### 验收标准\r\n\r\n1. WHEN 用户选择图片编辑模式 THEN 系统 SHALL 显示图片上传区域和文本输入框\r\n2. IF 用户上传图片并输入修改指令 THEN 系统 SHALL 通过 webhook 调用 n8n 后台进行图片编辑\r\n3. WHEN n8n 返回编辑后的图片 THEN 系统 SHALL 在面板中显示修改后的图像\r\n4. IF 图片上传失败 THEN 系统 SHALL 显示上传失败的错误提示\r\n\r\n### 需求 4: 用户界面设计\r\n\r\n**用户故事：** 作为用户，我希望图像生成面板具有直观易用的界面，以便高效地完成图像生成任务。\r\n\r\n#### 验收标准\r\n\r\n1. WHEN 面板加载 THEN 系统 SHALL 显示清晰的模式选择（文生图/图片编辑）\r\n2. IF 用户切换模式 THEN 系统 SHALL 动态更新界面元素\r\n3. WHEN 图像正在生成 THEN 系统 SHALL 显示加载状态和进度提示\r\n4. IF 有生成的图像 THEN 系统 SHALL 提供图像预览和下载功能\r\n\r\n## 非功能性需求\r\n\r\n### 代码架构和模块化\r\n\r\n- **单一职责原则**：每个组件应有明确的单一功能\r\n- **模块化设计**：工作流卡片、面板组件、服务层应相互独立\r\n- **依赖管理**：最小化模块间的依赖关系\r\n- **清晰接口**：定义组件间的清晰契约\r\n\r\n### 性能\r\n\r\n- 图像生成响应时间应在合理范围内（< 30秒）\r\n- 图片上传大小限制为 10MB\r\n- 支持常见图像格式（JPG、PNG、WebP）\r\n\r\n### 安全性\r\n\r\n- 验证 webhook 请求的合法性\r\n- 防止恶意文件上传\r\n- 实施速率限制防止滥用\r\n\r\n### 可靠性\r\n\r\n- 优雅处理网络错误和超时\r\n- 提供重试机制\r\n- 保持用户操作状态\r\n\r\n### 可用性\r\n\r\n- 界面直观，符合现有设计模式\r\n- 提供清晰的操作反馈\r\n- 支持键盘快捷键\r\n- 响应式设计适配不同屏幕尺寸",
  "fileStats": {
    "size": 3677,
    "lines": 88,
    "lastModified": "2025-09-27T01:15:06.910Z"
  },
  "comments": []
}